<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Welcome to Firebase Hosting</title>
    <link href="main.css" rel="stylesheet">
  </head>

  <body>
    <!-- update the version number as needed -->
    <script defer src="/__/firebase/10.7.1/firebase-app-compat.js"></script>
    <script defer src="/__/firebase/10.7.1/firebase-auth-compat.js"></script>
    <script defer src="/__/firebase/10.7.1/firebase-firestore-compat.js"></script>
    <script defer src="/__/firebase/10.7.1/firebase-storage-compat.js"></script>
   
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"
    integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>

    <script defer src="/__/firebase/init.js?useEmulator=true"></script>

    <script type="module">
      const firebaseConfig = {
        apiKey: "AIzaSyDCSwvY_M3NMWf_U1WsUhAsY5PBYZOSU9s",
        authDomain: "applemarket-677e0.firebaseapp.com",
        databaseURL: "https://applemarket-677e0-default-rtdb.asia-southeast1.firebasedatabase.app",
        projectId: "applemarket-677e0",
        storageBucket: "applemarket-677e0.appspot.com",
        messagingSenderId: "684685702521",
        appId: "1:684685702521:web:1d707b7ff4fa96859a6ba8",
        measurementId: "G-YKNDPMVP4D"
      };

      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
      import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

      // Initialize Firebase
      const app = initializeApp(firebaseConfig);

      const db = getFirestore(app);
      const storage = getStorage(app)

      $('#send').click(async function(){
        const selectedFile = document.querySelector('#image').file[0];
        if(!selectedFile){
            console.error('파일이 선택되지 않았습니다.');
            return;
        }
        const storageRef = ref(storage, 'image/' + selectedFile.name);

        try{
            const snapshot = await uploadBytes(storageRef, selectedFile);
            console.log('파일 업로드 완료');

            const 
        }catch(error e){

        }
      })

      fetchDocuments();
    </script>
    <div class="container mt-3">
        <input type="text" class="form-control mt-2" id="title" placeholder="title">
        <br>
        <textarea class="form-control mt-2" id="content" placeholder="content"></textarea>
        <br>
        <input type="text" class="form-control mt-2" id="price" placeholder="price">
        <br>
        <input class="form-control mt-2" type="file" id="image">
        <br>
        <button class="btn btn-danger mt-3" id="send">올리기</button>
    </div>
    <script>
        
    </script>
    
    
  </body>